(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{811:function(e,n,t){"use strict";t.d(n,"a",function(){return w}),t.d(n,"d",function(){return C}),t.d(n,"c",function(){return R}),t.d(n,"b",function(){return g});var r=t(7),i=t.n(r),a=t(17),s=t.n(a),d=t(0),o=d.createContext({state:{},dispatch:function(){return null}}),u=t(59),l=t.n(u),g={SignResponse:0,SignRequest:1,SelfSign:2,Result:3},c={OrderedSigningChanged:0,SignersOrderChanged:1,SignerAdded:2,SignerUpdated:3,SignerRemoved:4,SignersChanged:5,SelectedSignerChanged:6,SignRequestSenderAdded:7,SignatureCreatorShown:8,SignatureCreatorHidden:9,ManageSignersModalShown:10,ManageSignersModalHidden:11,VisibleHelperChanged:12,SelfSignSmallViewChanged:13,SignRequestSmallViewChanged:14,SignatureNameChanged:15,DocumentPreparedChanged:16,ResultFileAdded:17,SignResultChanged:18,SignResultRequestCanceled:19,WorkflowChanged:20},p=t(928);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var y={signWorkflow:g.SelfSign,orderedSigningEnabled:!1,signers:[],selectedSigner:null,signRequestSender:null,signRequestMessage:null,signResponseEnvelope:null,signatureCreatorVisible:!1,manageSignersModalVisible:!1,signatureType:void 0,signatureName:void 0,visibleHelper:void 0,selfSignSmallViewOpen:!1,signRequestSmallViewOpen:!1,documentPrepared:!1,resultFile:null,signResult:null},m=function(e,n){switch(n.type){case c.OrderedSigningChanged:return f({},e,{orderedSigningEnabled:n.payload.value});case c.SignersOrderChanged:return f({},e,{signers:n.payload.indexes.map(function(n){return e.signers[n]})});case c.SignerAdded:return f({},e,{signers:[].concat(l()(e.signers),[n.payload.signer]),signWorkflow:g.SignRequest});case c.SignerUpdated:return f({},e,{signers:e.signers.map(function(e){return e.email===n.payload.email?n.payload.signer:e})});case c.SignerRemoved:return f({},e,{signers:e.signers.filter(function(e){return e.email!==n.payload.email}),signWorkflow:e.signers.filter(function(e){return e.email!==n.payload.email}).length>0?g.SignRequest:g.SelfSign});case c.SignersChanged:return f({},e,{signers:n.payload.signers,signWorkflow:n.payload.signers.length>0?g.SignRequest:g.SelfSign});case c.SelectedSignerChanged:return f({},e,{selectedSigner:n.payload.signer});case c.SignRequestSenderAdded:return f({},e,{signRequestSender:n.payload.sender,signRequestMessage:n.payload.message});case c.SignatureCreatorShown:return f({},e,{signatureCreatorVisible:!0,signatureType:n.payload.type});case c.SignatureCreatorHidden:return f({},e,{signatureCreatorVisible:!1});case c.ManageSignersModalShown:return f({},e,{manageSignersModalVisible:!0});case c.ManageSignersModalHidden:return f({},e,{manageSignersModalVisible:!1});case c.VisibleHelperChanged:return f({},e,{visibleHelper:n.payload.helper});case c.SelfSignSmallViewChanged:return f({},e,{selfSignSmallViewOpen:n.payload.value});case c.SignRequestSmallViewChanged:return f({},e,{signRequestSmallViewOpen:n.payload.open});case c.SignatureNameChanged:return f({},e,{signatureName:n.payload.name});case c.DocumentPreparedChanged:return f({},e,{documentPrepared:n.payload.value});case c.ResultFileAdded:return f({},e,{resultFile:n.payload.file});case c.SignResultChanged:return f({},e,{signWorkflow:g.Result,signResult:n.payload.result});case c.SignResultRequestCanceled:return f({},e,{signResult:null===e.signResult?null:f({},e.signResult,{requestStatus:p.c.Canceled,signerStatuses:e.signResult.signerStatuses?e.signResult.signerStatuses.map(function(e){return f({},e,{status:p.c.Canceled})}):e.signResult.signerStatuses})});case c.WorkflowChanged:return f({},e,{signWorkflow:n.payload.value,signRequestSmallViewOpen:!0});default:return e}};function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function w(e){var n=e.children,t=e.getInitialState,r=t?t():{},a=d.useReducer(m,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},y,{},r)),u=s()(a,2),l=u[0],g=u[1];return d.createElement(o.Provider,{value:{state:l,dispatch:g}},n)}function C(){return d.useContext(o).state}function R(){var e=d.useContext(o).dispatch;return{orderedSigningChangedAction:function(n){return e({type:c.OrderedSigningChanged,payload:{value:n}})},signersOrderChangedAction:function(n){return e({type:c.SignersOrderChanged,payload:{indexes:n}})},signerAddedAction:function(n){return e({type:c.SignerAdded,payload:{signer:n}})},signerUpdatedAction:function(n,t){return e({type:c.SignerUpdated,payload:{email:n,signer:t}})},signerRemovedAction:function(n){return e({type:c.SignerRemoved,payload:{email:n}})},signersChangedAction:function(n){return e({type:c.SignersChanged,payload:{signers:n}})},selectedSignerChangedAction:function(n){return e({type:c.SelectedSignerChanged,payload:{signer:n}})},visibleHelperChangedAction:function(n){return e({type:c.VisibleHelperChanged,payload:{helper:n}})},signRequestSenderAddedAction:function(n,t){return e({type:c.SignRequestSenderAdded,payload:{sender:n,message:t}})},signatureCreatorShownAction:function(n){return e({type:c.SignatureCreatorShown,payload:{type:n}})},signatureCreatorHiddenAction:function(){return e({type:c.SignatureCreatorHidden})},manageSignersModalShownAction:function(){return e({type:c.ManageSignersModalShown})},manageSignersModalHiddenAction:function(){return e({type:c.ManageSignersModalHidden})},selfSignSmallViewChangedAction:function(n){return e({type:c.SelfSignSmallViewChanged,payload:{value:n}})},signRequestSmallViewChangedAction:function(n){return e({type:c.SignRequestSmallViewChanged,payload:{open:n}})},signatureNameChangedAction:function(n){return e({type:c.SignatureNameChanged,payload:{name:n}})},documentPreparedChangedAction:function(n){return e({type:c.DocumentPreparedChanged,payload:{value:n}})},resultFileAddedAction:function(n){return e({type:c.ResultFileAdded,payload:{file:n}})},signResultChangedAction:function(n){return e({type:c.SignResultChanged,payload:{result:n}})},signResultRequestCanceledAction:function(){return e({type:c.SignResultRequestCanceled})},workflowChangedAction:function(n){return e({type:c.WorkflowChanged,payload:{value:n}})}}}},928:function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"d",function(){return i}),t.d(n,"c",function(){return a}),t.d(n,"b",function(){return s}),t.d(n,"e",function(){return C});var r={Type:"type",SignatureID:"signatureID",Email:"email",Pointing:"pointing",Placeholder:"placeholder",Rotation:"rotation",Color:"color",SVG:"svg",DateFormat:"format",WidgetType:"widget-type"},i={Success:0,ProcessingTimeout:1,FileProtected:2,SigningError:3,SignRequestSendError:4,SignResponseSendError:5,AlreadySignedError:6,SignDocumentVersionConflictError:7,NetworkError:8,SystemError:9},a={Completed:"completed",OutForSignature:"out-for-signature",SignatureRequired:"signature-required",Waiting:"waiting",Canceled:"canceled",Expired:"expired",Draft:"draft"},s={DocumentOpened:"document_opened",DownloadReminderSent:"sent_download_reminder",SignReminderSent:"sent_sign_reminder",DocumentSigned:"document_signed",InvitedToSign:"invited_to_sign",RequestCanceled:"request_cancelled",FailedToInvite:"failed_to_invite"},d=t(3),o=t.n(d),u=t(14),l=t.n(u),g=t(21),c=t(973),p=t(811),S=t(43);function f(e){return e&&"0001-01-01T00:00:00Z"!==e&&"0001-01-01T00:00:00"!==e?new Date((n=e,/T\d/.test(n)?/[+-]\d\d:\d\d$/.test(n)?n:n.endsWith("Z")?n:"".concat(n,"Z"):n)).getTime():null;var n}function y(e){switch(e){case"completed":case"signed":return a.Completed;case"waiting":return a.Waiting;case"cancelled":return a.Canceled;case"expired":return a.Expired;case"draft":return a.Draft;case"out-for-signature":return a.OutForSignature;case"signature-required":return a.SignatureRequired;default:throw Object(g.r)(e)}}function m(e){switch(e){case"document_opened":return s.DocumentOpened;case"sent_download_reminder":return s.DownloadReminderSent;case"sent_sign_reminder":return s.SignReminderSent;case"document_signed":return s.DocumentSigned;case"invited_to_sign":return s.InvitedToSign;case"request_cancelled":return s.RequestCanceled;case"failed_to_invite":return s.FailedToInvite;default:throw Object(g.r)(e)}}function h(e){var n=e.status,t=e.first_name,r=e.last_name,i=e.email,a=e.signed_at;return{status:y(n),firstName:t,lastName:r,email:i,signedAt:f(a)}}function w(e){var n=e.event,t=e.subject,r=e.created_by,i=e.created_at;return{event:m(n),subject:t,creator:r,createdAt:f(i)||(new Date).getTime()}}function C(e,n,t){return R.apply(this,arguments)}function R(){return(R=l()(o.a.mark(function e(n,t,r){var a,s,d,u,l,m,C,R,b,O,v,q;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.j)("".concat(n,"/v1/sign-request/").concat(r),{credentials:"include",headers:Object(S.a)(t)});case 2:return a=e.sent,e.next=5,Object(g.m)(a);case 5:if(s=e.sent,d=s.payload,u=s.error,l=s.data,!u){e.next=15;break}e.t0=u,e.next="invalid_request_token"===e.t0?13:(e.t0,14);break;case 13:throw Object(c.j)();case 14:throw Object(g.q)(u);case 15:if(l&&"object"==typeof l){e.next=17;break}throw Object(g.r)(d);case 17:return C=(m=l).is_ordered,R=m.status,b=m.sent_at,O=m.expires_at,v=m.logs,q=m.signers,e.abrupt("return",{isPersistedResult:!0,status:i.Success,requestToken:r,signWorkflow:p.b.SignRequest,requestStatus:y(R),signerStatuses:q.map(h),log:(v||[]).map(w),expiresAt:f(O),sentAt:f(b),withOrderedSigning:C});case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}}}]);